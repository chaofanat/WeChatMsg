# 微信社交关系图谱分析器

这是一个自动化工具，能够：
1. 自动检测系统安装的微信版本
2. 根据版本选择正确的数据库解析函数
3. 解密微信聊天数据库
4. 提取社交关系数据并生成图谱
5. 启动Web服务器展示交互式图谱

## 功能特点

- **自动版本检测**：支持微信3.x和4.0版本
- **智能数据处理**：计算用户之间的互动指数和社交关系强度
- **可视化展示**：生成交互式的社交关系图谱
- **时间范围筛选**：支持按时间范围分析聊天数据
- **全屏查看**：支持图谱全屏展示
- **响应式设计**：适应不同屏幕尺寸

## 使用方法

1. 确保您的电脑已安装并登录微信
2. 运行以下命令启动分析器：

```bash
python wechat_analyzer.py
```

3. 程序会自动检测、解析并在浏览器中展示您的微信社交关系图谱

## 命令行选项

```
选项:
    -h, --help           显示帮助信息
    -t, --time-range     设置时间范围，格式: YYYY-MM-DD,YYYY-MM-DD
    -o, --output-dir     设置输出目录
    -p, --port           设置服务器端口（默认: 8000）
    --no-browser         不自动打开浏览器
    --max-contacts       最大联系人数量（默认: 1000）
    --no-server          仅生成数据，不启动服务器
```

### 示例

分析最近一个月的社交关系：
```bash
python wechat_analyzer.py -t "2025-04-01,2025-05-01"
```

使用指定端口号启动服务器：
```bash
python wechat_analyzer.py -p 9000
```

## 注意事项

- 需要微信处于登录状态才能解密数据库
- 首次运行时会创建解密后的数据库，可能需要等待一些时间
- 建议将联系人数量限制在合理范围，以避免图表过于拥挤

## 文件说明

- **wechat_analyzer.py**：主程序
- **version_detector.py**：微信版本检测模块
- **data_extractor.py**：数据提取和处理模块
- **server.py**：Web服务器模块
- **templates/**：HTML模板和前端资源

## 实现原理

1. 通过注册表或文件属性检测微信版本
2. 根据版本选择正确的数据库解密函数
3. 计算联系人之间的社交关系指标
4. 使用ECharts生成交互式图谱
5. 启动本地Web服务器展示结果 